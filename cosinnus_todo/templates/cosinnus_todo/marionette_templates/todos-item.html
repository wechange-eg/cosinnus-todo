{% load i18n %}


<script type="text/template" id="todos-item">
  <div class="list-group-item clearfix">
        <span class="item-box">
            <% if (is_completed) { %>
                <span class="icon-checkbox-checked"></span>
            <% } else { %>
                <span class="icon-checkbox-unchecked"></span>
            <% } %>
        </span>
        <span class="item-box">
            <div class="select2-avatar">
              <select class="select2-avatar-item">
                <option value="-1" data-avatar-url="/static/images/avatar-unselected.jpg"> keine Zuweisung</option>
                <% _.each(CosinnusApp.TodosApp.List.Controller.groupUsers.toJSON(), function(user) { %>
                  <option <% if (assigned_to !== null && assigned_to.id === user.id) { %>selected <% } %> value="<%= user.id %>" data-avatar-url="<% if (typeof user.profile !== 'undefined') { %><%= user.profile.avatar_40x40 %><% } else { %>none<% } %>">
                    <%= user.username %>
                  </option>
                <% }); %>
              </select>
            </div>
        </span>
        <span class="item-text">
            <span class="item-title" contenteditable="<% if (CosinnusApp.isUserLoggedIn()){ %>true<% } else { %>false<% } %>"><%= title %></span>
            <span class="item-text-buttons">
                <span class="btn item-btn darker js-item-title-save">Speichern</span>
                <button type="button" class="btn item-btn darker js-item-title-cancel">
                  <span class="icon-close"></span>
                </button>
            </span>
        </span>
        <span class="item-container-right">
            <span class="item-text-right input-group date date-picker"
                  data-model-id="<% if (typeof id ==='undefined') { %> -1 <% } else { %><%=id%><% } %>">
                <span class="input-group-addon">
                  <% if (due_date) { %>
                      <%= moment(due_date, cosinnus_datetime_format).fromNow() %>
                  <% } else { %>
                      <% if (CosinnusApp.isUserLoggedIn()){ %>
                          {% trans "F채lligkeitsdatum w채hlen" %}
                      <% } else { %>
                          {% trans "Kein F채lligkeitsdatum gew채hlt" %}
                      <% } %>
                  <% } %>
                </span>
            </span>
            <span class="item-box large-text star-box unselectable">
                <% if (priority === 1) { %>
                    <span class="icon-star js-icon-star" data-priority="<%= priority %>"></span>
                <% } else if (priority === 3) { %>
                    <span class="icon-star3 js-icon-star" data-priority="<%= priority %>"></span>
                <% } else { %>                
                    <span class="icon-star2 js-icon-star" data-priority="<%= priority %>"></span>
                <% } %>
            </span>
        </span>
  </div>
</script>
